# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 5
# RUN: llc -mtriple h2blb %s -o - -run-pass=instruction-select | FileCheck %s

# Check that the virtual register operands of G_IMPLICIT_DEF instructions are
# correctly lowered from register bank to register class.
---
name: select_implicit_def
legalized: true
regBankSelected: true
tracksRegLiveness: true
body: |
  bb.0:
    liveins: $r1

    ; CHECK-LABEL: name: select_implicit_def
    ; CHECK: liveins: $r1, $r0
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:gpr16 = COPY $r0
    ; CHECK-NEXT: [[DEF:%[0-9]+]]:gpr16sp = IMPLICIT_DEF
    ; CHECK-NEXT: $r1 = COPY [[DEF]]
    ; CHECK-NEXT: $r0 = COPY [[COPY]]
    ; CHECK-NEXT: RET_PSEUDO implicit $r1
    %0:gprb(s16) = G_IMPLICIT_DEF
    $r1 = COPY %0
    RET_PSEUDO implicit $r1
...
