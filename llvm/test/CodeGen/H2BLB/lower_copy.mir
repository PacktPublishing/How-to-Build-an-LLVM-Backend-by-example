# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 5
# RUN: llc -mtriple h2blb -run-pass postrapseudos -o - %s | FileCheck %s
# Test that generic copies are lowered to the properly sized MOV instruction.
---
name: lower_copy
tracksRegLiveness: true
body:             |
  bb.0:
    liveins: $r0, $d1

    ; CHECK-LABEL: name: lower_copy
    ; CHECK: liveins: $r0, $d1
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: $r1 = MOV16 $r0
    ; CHECK-NEXT: $d2 = MOV32 $d1
    ; CHECK-NEXT: $sp = MOVTOSP $r1
    ; CHECK-NEXT: $r1 = MOVFROMSP $sp
    ; CHECK-NEXT: RETURN implicit $r0, implicit $r1, implicit $d2
    $r1 = COPY $r0
    $d2 = COPY $d1
    $sp = COPY $r1
    $r1 = COPY $sp
    RETURN implicit $r0, implicit $r1, implicit $d2
...
